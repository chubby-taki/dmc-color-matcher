# 🧵 DMC Color Matcher

写真から色を抽出して、最も近いDMC刺繍糸の色を見つけるWebアプリケーションです。

## ✨ 機能

- 📷 **画像アップロード** - ドラッグ&ドロップまたはクリックで画像を読み込み
- 🔍 **色抽出（スポイト機能）** - 画像上の任意の場所から色を抽出
- 🎯 **DMC色マッチング** - CIEDE2000アルゴリズムで最も近い刺繍糸の色を検索
- 🔎 **ズーム・パン操作** - マウスホイールでズーム、Shift+ドラッグでパン移動
- 📍 **ピン表示** - 抽出した場所に番号付きピンを表示
- 📋 **抽出履歴** - 抽出した色の履歴を保存・管理
- 📥 **CSV出力** - 抽出履歴をCSVファイルでエクスポート
- 📄 **PDF出力** - 画像とマッチング結果を含むレポートをPDF形式で出力

## 🎨 使い方

### 1. 画像をアップロード
- 画像エリアをクリック、または画像をドラッグ&ドロップ

### 2. 色を抽出
- スポイトモードで画像上をクリック
- スポイトサイズはスライダーで調整可能（1x1～10x10 px）

### 3. DMC色を検索
- 「DMC色を検索」ボタンをクリック
- 最も近い5色が表示されます（Delta E値順）

### 4. 履歴に追加
- マッチング結果から色を選択すると履歴に追加
- 画像上にピン番号が表示されます

### 5. エクスポート
- **CSV出力**: 抽出履歴をスプレッドシートで管理
- **PDF出力**: ピン付き画像と詳細な色情報を含むレポート

## 📊 Delta E（色差）について

**Delta E**は、2つの色がどれだけ違うかを数値で表したものです：

| Delta E | 意味 |
|---------|------|
| 0～2 | ほぼ同じ色（完璧なマッチ） |
| 2～5 | 近い色（良いマッチング） |
| 5～10 | やや違う色（許容範囲） |
| 10以上 | 明らかに違う色 |

数値が小さいほど、抽出した色とDMC刺繍糸の色が近いことを示します。

## 🛠️ 技術スタック

- **HTML5 Canvas** - 画像表示とズーム・パン操作
- **Vanilla JavaScript** - フレームワークなしで軽量に実装
- **CIEDE2000** - 高精度な色差計算アルゴリズム
- **jsPDF + autoTable** - PDF生成
- **LocalStorage** - 履歴の永続化

## 🚀 セットアップ

### 必要なもの
- モダンなWebブラウザ（Chrome, Firefox, Safari, Edge）
- ローカルサーバー（開発時）

### ローカルで実行

```bash
# このディレクトリに移動
cd DMCcolor

# Pythonでローカルサーバーを起動
python3 -m http.server 8000

# ブラウザで開く
open http://localhost:8000
```

または、HTMLファイルを直接ブラウザで開くことも可能です。

## 📁 ファイル構成

```
DMCcolor/
├── index.html              # メインHTML
├── app.js                  # アプリケーションロジック
├── ciede2000.js           # 色差計算アルゴリズム
├── style.css              # スタイルシート
├── dmc_master_data.json   # DMC色データベース
├── generate_master_data.js # データ生成スクリプト
├── manifest.json          # PWAマニフェスト
└── README.md              # このファイル
```

## 🎯 使用例

### 刺繍デザインの色選び
ペットや風景の写真から色を抽出して、実際に購入すべきDMC刺繍糸の番号を確認できます。

### 複数色の一括管理
画像から複数の色を抽出し、CSV/PDFで一覧を出力。糸の購入リストとして活用できます。

## ⚙️ 操作方法

### キーボード・マウス
- **マウスホイール**: ズームイン/ズームアウト
- **Shift + ドラッグ**: パン移動
- **クリック**: 色を抽出（スポイトモード）

### ボタン
- **🔍 スポイト / ✋ パン**: モード切り替え
- **－ / ＋**: ズーム
- **リセット**: ズームとパンをリセット

## 🔧 今後の改善予定

- [ ] 複数画像の比較機能
- [ ] カスタムカラーパレット
- [ ] モバイル対応の最適化
- [ ] オフライン対応（PWA）

## 📝 ライセンス

このプロジェクトは個人利用・商用利用ともに自由に使用できます。

## 🤝 貢献

バグ報告や機能改善の提案は歓迎します！

---

**作成日**: 2025-12-30
**バージョン**: 1.0.0
